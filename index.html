<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CNIGA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/cniga.css?v=undefined">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <main id="app">
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="welcome" v-if="my.view == 'welcome'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="welcome-text">
                <h2> Welcome!</h2>
                <p>Are you a member of the California Nations Indian Gaming Association?</p>
              </div>
              <div class="button-split"><a class="button yes" v-on:click="my.view='login'">Yes</a><a class="button no" v-on:click="my.view='iframe'"> No</a></div>
              <div class="welcome-text">
                <p>
                   (if so, you will be asked to login using the email address we have on file)</p>
              </div>
            </div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="login" v-if="my.view == 'login'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="login-text login-before" v-if="loginStatus=='guest'">
                <p>CNIGA members: Use your email address to log in.</p>
              </div>
              <div class="login-text login-error" v-if="loginStatus=='error'">
                <p> <b>We don't have that address on file!</b></p>
                <p>
                    Please check to see if it was mistyped, or, if you believe you should be in the records, contact <a href="mailto:fake@email.info">fake@email.info</a></p>
              </div>
              <div class="login-text login-validating" v-if="loginStatus=='validating'">
                <p> <b>Check your email!</b></p>
                <p>
                  <p>We've sent a login code to the email address provided.</p>
                </p>
              </div>
              <div class="login-text login-error" v-if="loginStatus == 'validateError'">
                <p><b>Incorrect code.</b></p>
                <p>We've send a four letter code to your email address. Please double check.</p>
              </div>
              <form v-on:submit.prevent="checkPassword" v-if="loginStatus != 'validating' &amp;&amp; loginStatus != 'validateError'">
                <label><span v-bind:class=" { error: loginStatus=='error' } ">Email Address</span>
                  <input type="email" v-model="my.email" v-bind:class=" { error: loginStatus=='error' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Send Code</button>
                </div>
              </form>
              <form v-on:submit.prevent="checkLoginCode" v-if="loginStatus == 'validating' || loginStatus == 'validateError'">
                <label>
                  <input class="code" type="text" v-model="my.loginCode" maxlength="4" v-bind:class=" { error: loginStatus=='validateError' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Log In</button>
                </div>
              </form>
            </div>
            <div class="nevermind"><a v-on:click="loginStatus = 'guest'; my.userType = 'guest'; my.view = 'iframe'">Nevermind, continue as guest.  </a></div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="news" v-if="my.view == 'news'" v-cloak>
          <div class="inner">
            <dl v-for="item in news">
              <dt>
                <transition leave-active-class="animated bounceOut">
                  <div class="icon-holder"><span class="unread" v-if="!item.read">!</span></div>
                </transition>
                <div class="title-holder"><a class="title link" v-if="item.text" v-on:click="item.expand = !item.expand; item.read = true; countUnreadNews()"><span v-html="item.title"></span></a><span class="title" v-else v-html="item.title" v-on:click="item.read = true; countUnreadNews()"></span></div>
                <div class="date-holder">
                  <date class="stamp" v-html="item.date"></date>
                </div>
              </dt>
              <transition v-on:enter="slideDown" v-on:leave="slideUp" v-bind:css="false">
                <dd v-if="item.expand" v-html="item.text"></dd>
              </transition>
            </dl>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated animated-entrance bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="contact" v-if="my.view == 'contact'" v-cloak>
          <div class="inner">
            <form>
              <label><span v-if="!my.contactChoice">What can we do for you?</span>
                <select v-model="my.contactChoice">
                  <option></option>
                  <option>Ask a question</option>
                  <option>Request a Form</option>
                </select>
              </label>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <label v-if="my.contactChoice">
                  <textarea placeholder="What's your question?"></textarea>
                </label>
              </transition>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <div class="button-holder" v-if="my.contactChoice">
                  <button type="submit">Submit</button>
                </div>
              </transition>
            </form>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="iframe" v-if="my.view == 'iframe'" v-cloak v-bind:class="{guest: my.userType == 'guest'}">
          <div class="inner">
            <iframe src="https://cniga.com" width="100%"></iframe>
          </div>
        </section>
      </transition>
      <footer v-if="my.userType == 'member'">
        <nav><a v-on:click="my.view = 'news'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'news'}"></div>
            </div>
            <div class="badge" v-if="my.unreadItems &gt; 0" v-text="my.unreadItems"></div><span>News</span></a><a v-on:click="my.view = 'contact'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'contact'}"></div>
            </div><span>Contact</span></a><a v-on:click="my.view = 'members'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'members'}"></div>
            </div><span>Member Info</span></a><a v-on:click="my.view = 'iframe'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'iframe'}"></div>
            </div><span>Information</span></a></nav>
      </footer>
      <footer class="guest" v-else-if="my.userType == 'guest'">
        <div class="inner"><a v-on:click="my.view = 'login'">Log In</a></div>
      </footer>
    </main>
    <div class="javascripts">
      <script src="js/libraries/velocity.min.js"></script>
      <script src="js/libraries/vue.js"></script>
      <script src="js/cniga.min.js"></script>
    </div>
  </body>
</html>