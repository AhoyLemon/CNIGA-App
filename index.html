<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CNIGA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/cniga.css?v=undefined">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  </head>
  <body>
    <main id="app">
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="welcome" v-if="my.view == 'welcome'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="welcome-text">
                <h2> Welcome!</h2>
                <p>Are you a member of the California Nations Indian Gaming Association?</p>
              </div>
              <div class="button-split"><a class="button yes" v-on:click="my.view='login'">Yes</a><a class="button no" v-on:click="my.view='iframe'"> No</a></div>
              <div class="welcome-text">
                <p>
                   (if so, you will be asked to login using the email address we have on file)</p>
              </div>
            </div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="login" v-if="my.view == 'login'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="login-text login-before" v-if="loginStatus=='guest'">
                <p>CNIGA members: Use your email address to log in.</p>
              </div>
              <div class="login-text login-error" v-if="loginStatus=='error'">
                <p> <b>We don't have that address on file!</b></p>
                <p>
                    Please check to see if it was mistyped, or, if you believe you should be in the records, contact <a href="mailto:fake@email.info">fake@email.info</a></p>
              </div>
              <div class="login-text login-validating" v-if="loginStatus=='validating'">
                <p> <b>Check your email!</b></p>
                <p>
                  <p>We've sent a login code to the email address provided.</p>
                </p>
              </div>
              <div class="login-text login-error" v-if="loginStatus == 'validateError'">
                <p><b>Incorrect code.</b></p>
                <p>We've send a four letter code to your email address. Please double check.</p>
              </div>
              <form v-on:submit.prevent="checkPassword" v-if="loginStatus != 'validating' &amp;&amp; loginStatus != 'validateError'">
                <label><span v-bind:class=" { error: loginStatus=='error' } ">Email Address</span>
                  <input type="email" v-model="my.email" v-bind:class=" { error: loginStatus=='error' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Send Code</button>
                </div>
              </form>
              <form v-on:submit.prevent="checkLoginCode" v-if="loginStatus == 'validating' || loginStatus == 'validateError'">
                <label>
                  <input class="code" type="text" v-model="my.loginCode" maxlength="4" v-bind:class=" { error: loginStatus=='validateError' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Log In</button>
                </div>
              </form>
            </div>
            <div class="nevermind"><a v-on:click="loginStatus = 'guest'; my.userType = 'guest'; my.view = 'iframe'">Nevermind, continue as guest.  </a></div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="news" v-if="my.view == 'news'" v-cloak>
          <div class="inner">
            <dl v-for="item in news">
              <dt>
                <transition leave-active-class="animated bounceOut">
                  <div class="icon-holder"><span class="unread" v-if="!item.read">!</span></div>
                </transition>
                <div class="title-holder"><a class="title link" v-if="item.text" v-on:click="item.expand = !item.expand; item.read = true; countUnreadNews()"><span v-html="item.title"></span></a><span class="title" v-else v-html="item.title" v-on:click="item.read = true; countUnreadNews()"></span></div>
                <div class="date-holder">
                  <date class="stamp" v-html="item.date"></date>
                </div>
              </dt>
              <transition v-on:enter="slideDown" v-on:leave="slideUp" v-bind:css="false">
                <dd v-if="item.expand" v-html="item.text"></dd>
              </transition>
            </dl>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated animated-entrance bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="contact" v-if="my.view == 'contact'" v-cloak>
          <div class="inner">
            <form>
              <label><span v-if="!my.contactChoice">What can we do for you?</span>
                <select v-model="my.contactChoice">
                  <option></option>
                  <option>Ask a question</option>
                  <option>Request a Form</option>
                </select>
              </label>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <label v-if="my.contactChoice">
                  <textarea placeholder="What's your question?"></textarea>
                </label>
              </transition>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <div class="button-holder" v-if="my.contactChoice">
                  <button type="submit">Submit</button>
                </div>
              </transition>
            </form>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="members" v-if="my.view == 'members'" v-cloak>
          <div class="bills" v-if="my.view == 'members'" v-cloak v-bind:key="0">
            <div class="inner">
              <h4 class="bills-heading" v-on:click="stateSupportShow = !stateSupportShow;">State Legislation we are Supporting<span class="indicator" v-bind:class="{loading: billsLoading, expanded: stateSupportShow}"><span class="bar v"></span><span class="bar h"></span></span></h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateSupportShow">
                  <div class="bill" v-for="bill in stateSupport"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');">{{bill.billTitle}}</a><strong class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</strong>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p>
                    <div class="email-congress" v-if="bill.emailBody"><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)">Email Congress</a><span class="email-sent" v-on:click="setEmailSent(bill.billTitle)" v-bind:class="{checked: my.sentBills.indexOf(bill.billTitle) !== -1}"> <span class="checkbox"> 
                          <svg aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path>
                          </svg></span>I sent an email about this bill</span></div>
                  </div>
                </div>
              </transition>
              <h4 class="bills-heading" v-on:click="stateOpposeShow = !stateOpposeShow;">State Legislation we are Opposing<span class="indicator" v-bind:class="{loading: billsLoading, expanded: stateOpposeShow}"><span class="bar v"></span><span class="bar h"></span></span></h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateOpposeShow">
                  <div class="bill" v-for="bill in stateOppose"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');" href="#">{{bill.billTitle}}</a><span class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</span>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');" href="#">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)" v-if="bill.emailBody">Email Congress about this bill</a>
                  </div>
                </div>
              </transition>
              <h4 class="bills-heading" v-on:click="stateMonitorShow = !stateMonitorShow;">State Legislation we are Monitoring<span class="indicator" v-bind:class="{loading: billsLoading, expanded: stateMonitorShow}"><span class="bar v"></span><span class="bar h"></span></span></h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateMonitorShow">
                  <div class="bill" v-for="bill in stateMonitor"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');" href="#">{{bill.billTitle}}</a><span class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</span>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');" href="#">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)" v-if="bill.emailBody">Email Congress about this bill</a>
                  </div>
                </div>
              </transition>
            </div>
          </div>
          <div class="schedule" v-if="my.view == 'members'" v-cloak v-bind:key="1">
            <div class="inner">
              <h4 class="schedule-heading" v-on:click="scheduleShow = !scheduleShow">2018 CNIGA Schedule<span class="indicator" v-bind:class="{expanded: stateSupportShow}"><span class="bar v"></span><span class="bar h"></span></span></h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="schedule-items" v-if="scheduleShow">
                  <div class="schedule-item" v-for="item in schedule">
                    <h5>{{item.title}}</h5>
                    <date>{{item.datetime}}</date>
                    <p v-if="item.location">Location: {{item.location}} <span v-if="item.street_address">- {{item.street_address}} </span><span v-if="item.city">{{item.city}}, </span><span v-if="item.state">{{item.state}} </span><span v-if="item.zip">{{item.zip}}</span></p>
                    <p v-if="item.description">{{item.description}}</p>
                  </div>
                </div>
              </transition>
            </div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="iframe" v-if="my.view == 'iframe'" v-cloak v-bind:class="{guest: my.userType == 'guest'}">
          <div class="inner">
            <iframe src="https://cniga.com" height="100%" id="iframe" scrolling="no" width="100%"></iframe>
          </div>
        </section>
      </transition>
      <footer v-if="my.userType == 'member'">
        <nav><a class="news" v-on:click="my.view = 'news'">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50" v-bind:class="{active: my.view == 'news'}">
              <circle class="fill" cx="25" cy="25" r="23.9"></circle>
              <g class="glyph news">
                <path d="M14.4 39.8h22c2.5 0 4.5-2 4.5-4.5v-18c0-.5-.4-.9-.9-.9h-6.3V11c0-.5-.4-.9-.9-.9H9.9c-.5 0-.9.4-.9.9v23.4c0 3 2.5 5.4 5.4 5.4zm19.4-21.5h5.4v17.1c0 1.5-1.2 2.7-2.7 2.7-1.5 0-2.7-1.2-2.7-2.7V18.3zm-23-6.3H32v23.4c0 1 .3 1.9.9 2.7H14.4c-2 0-3.6-1.6-3.6-3.6V12z"></path>
                <path d="M13.5 22.1h15.7c.5 0 .9-.4.9-.9v-4.6c0-.5-.4-.9-.9-.9H13.5c-.5 0-.9.4-.9.9v4.6c0 .5.4.9.9.9zm.9-4.6h13.9v2.8H14.4v-2.8zM12.6 28h17.5v1.8H12.6zM12.6 24.4h17.5v1.8H12.6zM12.6 31.6h8.5v1.8h-8.5z"></path>
              </g>
              <path class="outline" d="M25 2.3c12.5 0 22.7 10.2 22.7 22.7S37.5 47.7 25 47.7 2.3 37.5 2.3 25 12.5 2.3 25 2.3m0-2C11.4.3.3 11.4.3 25s11 24.7 24.7 24.7 24.7-11 24.7-24.7S38.6.3 25 .3z"></path>
            </svg>
            <div class="badge" v-if="my.unreadItems &gt; 0" v-text="my.unreadItems"></div><span>News</span></a><a v-on:click="my.view = 'contact'">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50" v-bind:class="{active: my.view == 'contact'}">
              <circle class="fill" cx="25" cy="25" r="23.9"></circle>
              <path class="glyph contact" d="M37.5 11.3H12c-3 0-5.4 2.4-5.4 5.4v15.5c0 3 2.4 5.4 5.4 5.4h25.5c3 0 5.4-2.4 5.4-5.4V16.6c-.1-2.9-2.4-5.3-5.4-5.3zm3 20.9c0 1.7-1.4 3-3 3H12c-1.7 0-3-1.4-3-3V16.6c0-1.7 1.4-3 3-3h25.5c1.7 0 3 1.4 3 3v15.6zm-3-1.5c.5.4.5 1.2.1 1.7-.2.3-.6.4-.9.4-.3 0-.6-.1-.8-.3l-8-7.1-2.6 2c-.2.2-.4.2-.7.2s-.5-.1-.7-.2l-2.5-1.9-8 7.1c-.2.2-.5.3-.8.3-.3 0-.7-.1-.9-.4-.4-.5-.4-1.2.1-1.7l7.7-6.7-7.5-6c-.5-.4-.6-1.2-.2-1.7.4-.5 1.2-.6 1.7-.2l8.7 6.8 2.5 2L36 16.3c.5-.4 1.3-.3 1.7.2.4.5.3 1.3-.2 1.7L30 24l7.5 6.7z"></path>
              <path class="outline" d="M25 2.3c12.5 0 22.7 10.2 22.7 22.7S37.5 47.7 25 47.7 2.3 37.5 2.3 25 12.5 2.3 25 2.3m0-2C11.4.3.3 11.4.3 25s11 24.7 24.7 24.7 24.7-11 24.7-24.7S38.6.3 25 .3z"></path>
            </svg><span>Contact</span></a><a v-on:click="my.view = 'members'">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50" v-bind:class="{active: my.view == 'members'}">
              <circle class="fill" cx="25" cy="25" r="23.9"></circle>
              <g class="glyph members">
                <path class="st0" d="M20.4 28.2c1.4 2.2 4.6 2.2 4.6 2.2s3.2 0 4.6-2.2c1.4-2.2 3.1-6.1 3.3-8.8.2-2.7-.4-6.6-1.5-8.3C29.3 8 25 8 25 8s-4.3 0-6.4 3.1c-1.1 1.6-1.7 5.6-1.5 8.3.2 2.6 1.9 6.6 3.3 8.8z"></path>
                <path class="st0" d="M42.8 39.3c0-.2 0-.4-.1-.5-.1-1-.4-2.3-.9-3.6-.7-2-2.2-3.8-4.2-4.5-2.6-.9-4.9-1.4-6.4-1.6l-.1.1c-1.9 3-5.7 3.1-6.2 3.1-.4 0-4.3-.1-6.2-3.1l-.1-.1c-1.6.3-3.8.7-6.4 1.6-2 .7-3.4 2.5-4.2 4.5-.5 1.4-.8 2.6-.9 3.6 0 .2-.1.4-.1.5 0 .8.6 1.4 1.4 1.5v.9S16 49 24.9 49s17.8-7.7 17.8-7.7l-.4-.9c.4-.4.5-.7.5-1.1z"></path>
              </g>
              <path class="outline" d="M25 2.3c12.5 0 22.7 10.2 22.7 22.7S37.5 47.7 25 47.7 2.3 37.5 2.3 25 12.5 2.3 25 2.3m0-2C11.4.3.3 11.4.3 25s11 24.7 24.7 24.7 24.7-11 24.7-24.7S38.6.3 25 .3z"></path>
            </svg><span>Member Info</span></a><a v-on:click="my.view = 'iframe'">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 50 50" v-bind:class="{active: my.view == 'iframe'}">
              <circle class="fill" cx="25" cy="25" r="23.9"></circle>
              <path class="glyph info" d="M30.8 37.4l-.4 1.8c-1.3.5-2.4.9-3.2 1.2-.8.3-1.7.4-2.8.4-1.6 0-2.9-.4-3.7-1.2-.9-.8-1.3-1.8-1.3-3 0-.5 0-.9.1-1.4.1-.5.2-1 .3-1.7l1.7-5.9c.1-.6.3-1.1.4-1.6.1-.5.2-1 .2-1.4 0-.7-.2-1.3-.5-1.6s-.9-.4-1.8-.4c-.4 0-.9.1-1.3.2-.5.1-.8.3-1.2.4l.4-1.8c1.1-.4 2.1-.8 3.1-1.1 1-.3 1.9-.5 2.8-.5 1.6 0 2.8.4 3.7 1.2.9.8 1.3 1.8 1.3 3 0 .3 0 .7-.1 1.3l-.3 1.8-1.7 5.9c-.1.5-.3 1-.4 1.6 0 .6-.1 1.1-.1 1.4 0 .8.2 1.3.5 1.6.3.3 1 .4 1.8.4.4 0 .9-.1 1.4-.2.5-.2.9-.3 1.1-.4zm.4-24.5c0 1-.4 1.9-1.2 2.6-.8.7-1.7 1.1-2.8 1.1-1.1 0-2-.4-2.8-1.1-.8-.7-1.2-1.6-1.2-2.6s.4-1.9 1.2-2.6c.8-.7 1.7-1.1 2.8-1.1 1.1 0 2 .4 2.8 1.1.8.7 1.2 1.6 1.2 2.6z"></path>
              <path class="outline" d="M25 2.3c12.5 0 22.7 10.2 22.7 22.7S37.5 47.7 25 47.7 2.3 37.5 2.3 25 12.5 2.3 25 2.3m0-2C11.4.3.3 11.4.3 25s11 24.7 24.7 24.7 24.7-11 24.7-24.7S38.6.3 25 .3z"></path>
            </svg><span>Information</span></a></nav>
      </footer>
      <footer class="guest" v-else-if="my.userType == 'guest'">
        <div class="inner"><a v-on:click="my.view = 'login'">Log In</a></div>
      </footer>
    </main>
    <div class="javascripts">
      <script src="cordova.js"></script>
      <script src="js/libraries/velocity.min.js"></script>
      <script src="js/libraries/vue.js"></script>
      <script src="js/cniga.min.js"></script>
    </div>
  </body>
</html>