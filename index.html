<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CNIGA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/cniga.css?v=undefined">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  </head>
  <body>
    <main id="app">
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="welcome" v-if="my.view == 'welcome'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="welcome-text">
                <h2> Welcome!</h2>
                <p>Are you a member of the California Nations Indian Gaming Association?</p>
              </div>
              <div class="button-split"><a class="button yes" v-on:click="my.view='login'">Yes</a><a class="button no" v-on:click="my.view='iframe'"> No</a></div>
              <div class="welcome-text">
                <p>
                   (if so, you will be asked to login using the email address we have on file)</p>
              </div>
            </div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="login" v-if="my.view == 'login'" v-cloak>
          <div class="inner">
            <div class="logo-holder"><img class="logo" src="svg/cniga.svg"></div>
            <div class="box"> 
              <div class="login-text login-before" v-if="loginStatus=='guest'">
                <p>CNIGA members: Use your email address to log in.</p>
              </div>
              <div class="login-text login-error" v-if="loginStatus=='error'">
                <p> <b>We don't have that address on file!</b></p>
                <p>
                    Please check to see if it was mistyped, or, if you believe you should be in the records, contact <a href="mailto:fake@email.info">fake@email.info</a></p>
              </div>
              <div class="login-text login-validating" v-if="loginStatus=='validating'">
                <p> <b>Check your email!</b></p>
                <p>
                  <p>We've sent a login code to the email address provided.</p>
                </p>
              </div>
              <div class="login-text login-error" v-if="loginStatus == 'validateError'">
                <p><b>Incorrect code.</b></p>
                <p>We've send a four letter code to your email address. Please double check.</p>
              </div>
              <form v-on:submit.prevent="checkPassword" v-if="loginStatus != 'validating' &amp;&amp; loginStatus != 'validateError'">
                <label><span v-bind:class=" { error: loginStatus=='error' } ">Email Address</span>
                  <input type="email" v-model="my.email" v-bind:class=" { error: loginStatus=='error' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Send Code</button>
                </div>
              </form>
              <form v-on:submit.prevent="checkLoginCode" v-if="loginStatus == 'validating' || loginStatus == 'validateError'">
                <label>
                  <input class="code" type="text" v-model="my.loginCode" maxlength="4" v-bind:class=" { error: loginStatus=='validateError' } ">
                </label>
                <div class="button-holder">
                  <button type="submit">Log In</button>
                </div>
              </form>
            </div>
            <div class="nevermind"><a v-on:click="loginStatus = 'guest'; my.userType = 'guest'; my.view = 'iframe'">Nevermind, continue as guest.  </a></div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="news" v-if="my.view == 'news'" v-cloak>
          <div class="inner">
            <dl v-for="item in news">
              <dt>
                <transition leave-active-class="animated bounceOut">
                  <div class="icon-holder"><span class="unread" v-if="!item.read">!</span></div>
                </transition>
                <div class="title-holder"><a class="title link" v-if="item.text" v-on:click="item.expand = !item.expand; item.read = true; countUnreadNews()"><span v-html="item.title"></span></a><span class="title" v-else v-html="item.title" v-on:click="item.read = true; countUnreadNews()"></span></div>
                <div class="date-holder">
                  <date class="stamp" v-html="item.date"></date>
                </div>
              </dt>
              <transition v-on:enter="slideDown" v-on:leave="slideUp" v-bind:css="false">
                <dd v-if="item.expand" v-html="item.text"></dd>
              </transition>
            </dl>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated animated-entrance bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="contact" v-if="my.view == 'contact'" v-cloak>
          <div class="inner">
            <form>
              <label><span v-if="!my.contactChoice">What can we do for you?</span>
                <select v-model="my.contactChoice">
                  <option></option>
                  <option>Ask a question</option>
                  <option>Request a Form</option>
                </select>
              </label>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <label v-if="my.contactChoice">
                  <textarea placeholder="What's your question?"></textarea>
                </label>
              </transition>
              <transition enter-active-class="animated animated-entrance zoomIn" leave-active-class="animated zoomOut">
                <div class="button-holder" v-if="my.contactChoice">
                  <button type="submit">Submit</button>
                </div>
              </transition>
            </form>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="members" v-if="my.view == 'members'" v-cloak>
          <div class="bills" v-if="my.view == 'members'" v-cloak v-bind:key="0">
            <div class="inner">
              <h4 class="bills-heading" v-on:click="stateSupportShow = !stateSupportShow;">State Legislation we are Supporting<span class="indicator" v-bind:class="{loading: billsLoading, expanded:stateSupportShow}">
                  <svg class="loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" version="1.1" xml:space="preserve" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41421">
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M84.535,52.91C84.238,50.449 83.662,48.031 82.819,45.7L71.305,49.865C71.833,51.324 72.193,52.837 72.379,54.377L84.535,52.91Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M81.441,42.45C80.566,40.661 79.529,38.956 78.344,37.356L68.505,44.643C69.246,45.644 69.895,46.712 70.443,47.831L81.441,42.45Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M83.706,65.112C84.413,62.409 84.771,59.626 84.771,56.832L72.527,56.832C72.527,58.581 72.303,60.322 71.861,62.014L83.706,65.112Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M75.186,79.972C78.381,76.778 80.879,72.956 82.524,68.748L71.121,64.29C70.091,66.923 68.528,69.315 66.528,71.314L75.186,79.972Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M55.929,89.326C61.484,88.662 66.775,86.585 71.299,83.294L64.095,73.394C61.264,75.453 57.953,76.753 54.476,77.169L55.929,89.326Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M33.831,84.019C39.22,87.629 45.56,89.557 52.046,89.557L52.046,77.313C47.986,77.313 44.018,76.107 40.646,73.847L33.831,84.019Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M19.562,60.795C20.525,68.69 24.331,75.965 30.268,81.258L38.416,72.119C34.7,68.806 32.318,64.254 31.716,59.312L19.562,60.795Z" fill="black"></path>
                    </g>
                  </svg><span class="bar v"></span><span class="bar h"></span></span>
              </h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateSupportShow">
                  <div class="bill" v-for="bill in stateSupport"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');">{{bill.billTitle}}</a><strong class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</strong>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p>
                    <div class="email-congress" v-if="bill.emailBody"><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)">Email Congress</a><span class="email-sent" v-on:click="setEmailSent(bill.billTitle)" v-bind:class="{checked: my.sentBills.indexOf(bill.billTitle) !== -1}"> <span class="checkbox"> 
                          <svg aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path>
                          </svg></span>I sent an email about this bill</span></div>
                  </div>
                </div>
              </transition>
              <h4 class="bills-heading" v-on:click="stateOpposeShow = !stateOpposeShow;">State Legislation we are Opposing<span class="indicator" v-bind:class="{loading: billsLoading, expanded:stateOpposeShow}">
                  <svg class="loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" version="1.1" xml:space="preserve" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41421">
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M84.535,52.91C84.238,50.449 83.662,48.031 82.819,45.7L71.305,49.865C71.833,51.324 72.193,52.837 72.379,54.377L84.535,52.91Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M81.441,42.45C80.566,40.661 79.529,38.956 78.344,37.356L68.505,44.643C69.246,45.644 69.895,46.712 70.443,47.831L81.441,42.45Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M83.706,65.112C84.413,62.409 84.771,59.626 84.771,56.832L72.527,56.832C72.527,58.581 72.303,60.322 71.861,62.014L83.706,65.112Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M75.186,79.972C78.381,76.778 80.879,72.956 82.524,68.748L71.121,64.29C70.091,66.923 68.528,69.315 66.528,71.314L75.186,79.972Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M55.929,89.326C61.484,88.662 66.775,86.585 71.299,83.294L64.095,73.394C61.264,75.453 57.953,76.753 54.476,77.169L55.929,89.326Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M33.831,84.019C39.22,87.629 45.56,89.557 52.046,89.557L52.046,77.313C47.986,77.313 44.018,76.107 40.646,73.847L33.831,84.019Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M19.562,60.795C20.525,68.69 24.331,75.965 30.268,81.258L38.416,72.119C34.7,68.806 32.318,64.254 31.716,59.312L19.562,60.795Z" fill="black"></path>
                    </g>
                  </svg><span class="bar v"></span><span class="bar h"></span></span>
              </h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateOpposeShow">
                  <div class="bill" v-for="bill in stateOppose"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');" href="#">{{bill.billTitle}}</a><span class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</span>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');" href="#">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)" v-if="bill.emailBody">Email Congress about this bill</a>
                  </div>
                </div>
              </transition>
              <h4 class="bills-heading" v-on:click="stateMonitorShow = !stateMonitorShow;">State Legislation we are Monitoring<span class="indicator" v-bind:class="{loading: billsLoading, expanded:stateMonitorShow}">
                  <svg class="loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" version="1.1" xml:space="preserve" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41421">
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M84.535,52.91C84.238,50.449 83.662,48.031 82.819,45.7L71.305,49.865C71.833,51.324 72.193,52.837 72.379,54.377L84.535,52.91Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M81.441,42.45C80.566,40.661 79.529,38.956 78.344,37.356L68.505,44.643C69.246,45.644 69.895,46.712 70.443,47.831L81.441,42.45Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M83.706,65.112C84.413,62.409 84.771,59.626 84.771,56.832L72.527,56.832C72.527,58.581 72.303,60.322 71.861,62.014L83.706,65.112Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M75.186,79.972C78.381,76.778 80.879,72.956 82.524,68.748L71.121,64.29C70.091,66.923 68.528,69.315 66.528,71.314L75.186,79.972Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M55.929,89.326C61.484,88.662 66.775,86.585 71.299,83.294L64.095,73.394C61.264,75.453 57.953,76.753 54.476,77.169L55.929,89.326Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M33.831,84.019C39.22,87.629 45.56,89.557 52.046,89.557L52.046,77.313C47.986,77.313 44.018,76.107 40.646,73.847L33.831,84.019Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M19.562,60.795C20.525,68.69 24.331,75.965 30.268,81.258L38.416,72.119C34.7,68.806 32.318,64.254 31.716,59.312L19.562,60.795Z" fill="black"></path>
                    </g>
                  </svg><span class="bar v"></span><span class="bar h"></span></span>
              </h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="bill-list" v-if="stateMonitorShow">
                  <div class="bill" v-for="bill in stateMonitor"><a class="bill-title" v-on:click="openLink(bill.billLink, '_system');" href="#">{{bill.billTitle}}</a><span class="bill-custom-name" v-if="bill.billCustomName">{{bill.billCustomName}}</span>
                    <p class="bill-author"><a class="bill-author--name" v-on:click="openLink(bill.billAuthorLink, '_system');" href="#">{{bill.billAuthorName}}</a><span class="bill-author--party" v-bind:class="bill.billAuthorParty">{{bill.billAuthorParty}}</span></p>
                    <p>{{bill.description}}</p><a class="email-button button" :href="emailLink(bill.emailTitle, bill.emailBody)" v-if="bill.emailBody">Email Congress about this bill</a>
                  </div>
                </div>
              </transition>
            </div>
          </div>
          <div class="schedule" v-if="my.view == 'members'" v-cloak v-bind:key="1">
            <div class="inner">
              <h4 class="schedule-heading" v-on:click="scheduleShow = !scheduleShow">2018 CNIGA Schedule<span class="indicator" v-bind:class="{loading: billsLoading, expanded:scheduleShow}">
                  <svg class="loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" version="1.1" xml:space="preserve" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41421">
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M84.535,52.91C84.238,50.449 83.662,48.031 82.819,45.7L71.305,49.865C71.833,51.324 72.193,52.837 72.379,54.377L84.535,52.91Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M81.441,42.45C80.566,40.661 79.529,38.956 78.344,37.356L68.505,44.643C69.246,45.644 69.895,46.712 70.443,47.831L81.441,42.45Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M83.706,65.112C84.413,62.409 84.771,59.626 84.771,56.832L72.527,56.832C72.527,58.581 72.303,60.322 71.861,62.014L83.706,65.112Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M75.186,79.972C78.381,76.778 80.879,72.956 82.524,68.748L71.121,64.29C70.091,66.923 68.528,69.315 66.528,71.314L75.186,79.972Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M55.929,89.326C61.484,88.662 66.775,86.585 71.299,83.294L64.095,73.394C61.264,75.453 57.953,76.753 54.476,77.169L55.929,89.326Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M33.831,84.019C39.22,87.629 45.56,89.557 52.046,89.557L52.046,77.313C47.986,77.313 44.018,76.107 40.646,73.847L33.831,84.019Z" fill="black"></path>
                    </g>
                    <g transform="matrix(1.20661,0,0,1.20661,-12.7993,-18.5745)">
                      <path d="M19.562,60.795C20.525,68.69 24.331,75.965 30.268,81.258L38.416,72.119C34.7,68.806 32.318,64.254 31.716,59.312L19.562,60.795Z" fill="black"></path>
                    </g>
                  </svg><span class="bar v"></span><span class="bar h"></span></span>
              </h4>
              <transition v-on:enter="slideDown" v-on:leave="slideUp">
                <div class="schedule-items" v-if="scheduleShow">
                  <div class="schedule-item" v-for="item in schedule">
                    <h5>{{item.title}}</h5>
                    <date>{{item.datetime}}</date>
                    <p v-if="item.location">Location: {{item.location}} <span v-if="item.street_address">- {{item.street_address}} </span><span v-if="item.city">{{item.city}}, </span><span v-if="item.state">{{item.state}} </span><span v-if="item.zip">{{item.zip}}</span></p>
                    <p v-if="item.description">{{item.description}}</p>
                  </div>
                </div>
              </transition>
            </div>
          </div>
        </section>
      </transition>
      <transition enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutUp">
        <section class="iframe" v-if="my.view == 'iframe'" v-cloak v-bind:class="{guest: my.userType == 'guest'}">
          <div class="inner">
            <iframe src="https://cniga.com" height="100%" id="iframe" scrolling="no" width="100%"></iframe>
          </div>
        </section>
      </transition>
      <footer v-if="my.userType == 'member'">
        <nav><a v-on:click="my.view = 'news'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'news'}"></div>
            </div>
            <div class="badge" v-if="my.unreadItems &gt; 0" v-text="my.unreadItems"></div><span>News</span></a><a v-on:click="my.view = 'contact'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'contact'}"></div>
            </div><span>Contact</span></a><a v-on:click="my.view = 'members'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'members'}"></div>
            </div><span>Member Info</span></a><a v-on:click="my.view = 'iframe'">
            <div class="icon">
              <div class="fill" v-bind:class="{active: my.view == 'iframe'}"></div>
            </div><span>Information</span></a></nav>
      </footer>
      <footer class="guest" v-else-if="my.userType == 'guest'">
        <div class="inner"><a v-on:click="my.view = 'login'">Log In</a></div>
      </footer>
    </main>
    <div class="javascripts">
      <script src="cordova.js"></script>
      <script src="js/libraries/velocity.min.js"></script>
      <script src="js/libraries/vue.js"></script>
      <script src="js/cniga.min.js"></script>
    </div>
  </body>
</html>